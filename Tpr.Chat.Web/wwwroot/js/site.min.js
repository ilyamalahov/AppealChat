const getAccessToken=(n,t)=>new Promise((i,r)=>{const u=sessionStorage.getItem("access_token");if(u)return i(u);$.ajax({method:"post",url:"token",data:{appealId:n,key:t},success:n=>(sessionStorage.setItem("access_token",n.accessToken),i(n.accessToken)),error:r})}),receiveMessage=(n,t)=>{const i=t?"Вы":n.nickName,r=luxon.DateTime.fromISO(n.createDate),u='<div class="message-bubble">'+n.messageString+"<\/div>",f=i+' <b class="message-date">'+r.toFormat("tt")+"<\/b>";return addMessage(u+f,t,!1)},joinMessage=(n,t,i,r)=>{const u=luxon.DateTime.fromISO(n);var f=r?"Вы подключились к консультации":i?t+" подключился к консультации. Вы можете задать свои вопросы здесь.":t+" подключился к консультации";const e=f+' <b class="message-date">'+u.toFormat("tt")+"<\/b>";return addMessage(e,r)},leaveMessage=(n,t)=>{const i=luxon.DateTime.fromISO(n.createDate),r=t?"Вы покинули консультацию":n.nickName+" покинул консультацию",u=r+' <b class="message-date">'+i.toFormat("tt")+"<\/b>";return addMessage(u,t)},firstJoinMessage=(n,t)=>{const i="Член КК № "+n+" подключился к консультации. Вы можете задать ему свои вопросы";return addMessage(i,t)},changeExpertMessage=n=>{const t="Произведена замена члена КК № "+n;return addMessage(n,!0)},addMessage=(n,t,i=true)=>{const u=$('<div class="message '+(t?"place-left":"place-right")+'">').html(n);var r=$("<li>");return i&&r.addClass("message-status"),r.html(u)};jQuery.fn.scrollTo=function(n){return $(this).scrollTop($(this).scrollTop()-$(this).offset().top+$(n).offset().top),this};jQuery.fn.insertAtCursor=function(n){const i=$(this).prop("selectionStart"),r=$(this).prop("selectionEnd"),t=$(this).val();if(i||i==="0"){var u=t.substring(0,i),f=t.substring(r,t.length);$(this).val(u+n+f)}else $(this).val(t+n);return this};jQuery.fn.highlightText=function(n){var t=$(this).text(),i=t.toLowerCase().indexOf(n.toLowerCase()),r=i+n.length,u=t.slice(0,i),f=t.slice(i,r),e=t.slice(r);return $(this).html(u+"<em>"+f+"<\/em>"+e),this};jQuery.fn.expandRows=function(){var n=$(this).data("minRows")|1;$(this).attr("rows",n);const t=Math.ceil(($(this).prop("scrollHeight")-$(this).innerHeight())/16);return n+=Math.max(0,Math.min(t,4)),$(this).attr("rows",n),this};jQuery.fn.showModal=function(n,t){$.get(n,t,n=>$(this).html(n).fadeIn(300))};jQuery.fn.hideModal=function(){$(this).html("").fadeOut(300)};jQuery.expr.filters.icontains=function(n,t,i){return(n.innerText||n.textContent||"").toLowerCase().indexOf(i[3].toLowerCase())>-1};var contactsInfoIsVisible=!1;const toggleHelpInfo=n=>{contactsInfoIsVisible=n;$("#contactsButton img").toggleClass("flipped",n);var t=0;if(n){const n=$("#contactsButton img").offset();t=$(window).height()-(n.top+$("#contactsButton img").innerHeight())-10}$("#contactsArrow").css({bottom:t});const i=$("#contactsButton").outerWidth()+10;$("#contactsTooltip").toggle(n).css("left",i)},toggleSideMenu=n=>$("#sideMenu").toggle(n);$(document).ready(()=>{$("#contactsButton").on("click",()=>toggleHelpInfo(!contactsInfoIsVisible));$("#closeHelpButton").on("click",()=>toggleHelpInfo(!1));$("#sideMenuButton").on("click",()=>toggleSideMenu(!0));$("#closeSideButton").on("click",()=>toggleSideMenu(!1));$("#appealInfoLink").on("click",()=>$("#modal").showModal("modal/appealinfo",{appealId}));$("#contactsLink").on("click",()=>$("#modal").showModal("modal/contacts"));$(".sidemenu-item").on("click",()=>toggleSideMenu(!1))});$(document).on("click","#closeModalButton, #cancelButton, #cancelMobileButton",()=>$("#modal").hideModal());