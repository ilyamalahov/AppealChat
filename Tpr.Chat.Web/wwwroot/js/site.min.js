const updateInfo=function(n,t,i){$.post("update",{appealId:t}).done(i)},getAccessToken=function(){return new Promise((n,t)=>{var i=sessionStorage.getItem("access_token");if(i)return n(i);$.post("token",{appealId:appealId,key:expertKey}).done(function(t){return sessionStorage.setItem("access_token",t.accessToken),n(t.accessToken)}).fail(t)})},insertAtCursor=function(n,t){var i,r,u;document.selection?(n.focus(),i=document.selection.createRange(),i.text=t):n.prop("selectionStart")||n.prop("selectionStart")==="0"?(r=n.val().substring(0,n.prop("selectionStart")),u=n.val().substring(n.prop("selectionEnd"),n.val().length),n.val(r+t+u)):n.val(n.val()+t);n.focus()},messageTextKeyup=function(n){n.keyCode!==13||n.shiftKey||(n.preventDefault(),$(this).val()!==""&&sendMessage($(this).val()))},receiveMessage=(n,t)=>{const i=luxon.DateTime.fromISO(n.createDate),r=t?"Вы":n.nickName,u='<div class="message-bubble">'+n.messageString+"<\/div>",f=r+" <b>("+i.toFormat("F")+")<\/b>";return addMessage(u+f,t)},joinUser=function(n,t){const i=luxon.DateTime.fromISO(n.createDate),r=t?"Вы подключились к консультации":n.nickName+" подключился к консультации",u=r+" <b>("+i.toFormat("F")+")<\/b>";return addMessage(u,t)},leaveUser=(n,t)=>{const i=luxon.DateTime.fromISO(n.createDate),r=t?"Вы покинули консультацию":n.nickName+" покинул консультацию",u=r+" <b>("+i.toFormat("F")+")<\/b>";return addMessage(u,t)},addMessage=(n,t)=>{const i=$('<div class="message '+(t?"place-left":"place-right")+'"><\/div>').html(n);return $("<li><\/li>").html(i)};jQuery.fn.scrollTo=function(n){return $(this).scrollTop($(this).scrollTop()-$(this).offset().top+$(n).offset().top),this};jQuery.expr.filters.icontains=function(n,t,i){return(n.innerText||n.textContent||"").toLowerCase().indexOf(i[3].toLowerCase())>-1};const showModal=(n,t)=>new Promise((i,r)=>{$.get(n,t).done(n=>$("#modal").html(n).fadeIn(),i()).fail(r)}),closeModal=()=>{$("#modal").html("").fadeOut()},changeExpert=(n,t)=>new Promise((i,r)=>{$.ajax({method:"GET",url:"api/expert/change",headers:{Authorization:"Bearer "+n},beforeSend:t,success:i,error:r})});